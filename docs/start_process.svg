<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="1119px" preserveAspectRatio="none" style="width:947px;height:1119px;" version="1.1" viewBox="0 0 947 1119" width="947px" zoomAndPan="magnify"><defs><filter height="300%" id="f1by7kaox7j5k" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><rect fill="#FFFFFF" filter="url(#f1by7kaox7j5k)" height="896.7656" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="168" y="119.6094"/><rect fill="#FFFFFF" filter="url(#f1by7kaox7j5k)" height="858.4141" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="173" y="157.9609"/><rect fill="#FFFFFF" filter="url(#f1by7kaox7j5k)" height="752.4531" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="336" y="263.9219"/><rect fill="#FFFFFF" filter="url(#f1by7kaox7j5k)" height="542.2734" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="341" y="474.1016"/><rect fill="#FFFFFF" filter="url(#f1by7kaox7j5k)" height="30.3516" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="346" y="786.9141"/><rect fill="#FFFFFF" filter="url(#f1by7kaox7j5k)" height="161.7578" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="346" y="854.6172"/><rect fill="#FFFFFF" filter="url(#f1by7kaox7j5k)" height="123.4063" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="351" y="892.9688"/><rect fill="#FFFFFF" filter="url(#f1by7kaox7j5k)" height="19.3516" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="356" y="997.0234"/><rect fill="#FFFFFF" filter="url(#f1by7kaox7j5k)" height="705.8438" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="508" y="310.5313"/><rect fill="#FFFFFF" filter="url(#f1by7kaox7j5k)" height="645.2344" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="654.5" y="371.1406"/><rect fill="#FFFFFF" filter="url(#f1by7kaox7j5k)" height="813.0625" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="811" y="203.3125"/><rect fill="#FFFFFF" filter="url(#f1by7kaox7j5k)" height="108.7031" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="816" y="647.8594"/><rect fill="#FFFFFF" filter="url(#f1by7kaox7j5k)" height="28" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="821" y="691.2109"/><rect fill="#FEFECE" filter="url(#f1by7kaox7j5k)" height="31.6094" style="stroke: #A80036; stroke-width: 1.5;" width="123" x="752.5" y="171.3125"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="109" x="759.5" y="192.8457">ConcreteProcess</text><rect fill="#FEFECE" filter="url(#f1by7kaox7j5k)" height="31.6094" style="stroke: #A80036; stroke-width: 1.5;" width="121" x="278.5" y="231.9219"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="107" x="285.5" y="253.4551">CProgressDialog</text><rect fill="#FEFECE" filter="url(#f1by7kaox7j5k)" height="31.6094" style="stroke: #A80036; stroke-width: 1.5;" width="103" x="459.5" y="278.5313"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="89" x="466.5" y="300.0645">CProgressCtrl</text><rect fill="#FEFECE" filter="url(#f1by7kaox7j5k)" height="31.6094" style="stroke: #A80036; stroke-width: 1.5;" width="162" x="576.5" y="339.1406"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="148" x="583.5" y="360.6738">WorkerThreadManager</text><rect fill="#FFFFFF" filter="url(#f1by7kaox7j5k)" height="256.4609" style="stroke: #000000; stroke-width: 2.0;" width="669.5" x="268.5" y="569.1563"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="32" x2="32" y1="87.6094" y2="1034.375"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="173" x2="173" y1="87.6094" y2="1034.375"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="340.5" x2="340.5" y1="265.2266" y2="1034.375"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="512.5" x2="512.5" y1="311.8359" y2="1034.375"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="659.5" x2="659.5" y1="372.4453" y2="1034.375"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="815.5" x2="815.5" y1="204.6172" y2="1034.375"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="42" x="8" y="84.5332">ユーザ</text><ellipse cx="32" cy="13" fill="#FEFECE" filter="url(#f1by7kaox7j5k)" rx="8" ry="8" style="stroke: #A80036; stroke-width: 2.0;"/><path d="M32,21 L32,48 M19,29 L45,29 M32,48 L19,63 M32,48 L45,63 " fill="#FEFECE" filter="url(#f1by7kaox7j5k)" style="stroke: #A80036; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="42" x="8" y="1047.9082">ユーザ</text><ellipse cx="32" cy="1060.9844" fill="#FEFECE" filter="url(#f1by7kaox7j5k)" rx="8" ry="8" style="stroke: #A80036; stroke-width: 2.0;"/><path d="M32,1068.9844 L32,1095.9844 M19,1076.9844 L45,1076.9844 M32,1095.9844 L19,1110.9844 M32,1095.9844 L45,1110.9844 " fill="#FEFECE" filter="url(#f1by7kaox7j5k)" style="stroke: #A80036; stroke-width: 2.0;"/><rect fill="#FEFECE" filter="url(#f1by7kaox7j5k)" height="31.6094" style="stroke: #A80036; stroke-width: 1.5;" width="84" x="129" y="51"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="70" x="136" y="72.5332">MainDialog</text><rect fill="#FEFECE" filter="url(#f1by7kaox7j5k)" height="31.6094" style="stroke: #A80036; stroke-width: 1.5;" width="84" x="129" y="1033.375"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="70" x="136" y="1054.9082">MainDialog</text><rect fill="#FEFECE" filter="url(#f1by7kaox7j5k)" height="31.6094" style="stroke: #A80036; stroke-width: 1.5;" width="121" x="278.5" y="1033.375"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="107" x="285.5" y="1054.9082">CProgressDialog</text><rect fill="#FEFECE" filter="url(#f1by7kaox7j5k)" height="31.6094" style="stroke: #A80036; stroke-width: 1.5;" width="103" x="459.5" y="1033.375"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="89" x="466.5" y="1054.9082">CProgressCtrl</text><rect fill="#FEFECE" filter="url(#f1by7kaox7j5k)" height="31.6094" style="stroke: #A80036; stroke-width: 1.5;" width="162" x="576.5" y="1033.375"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="148" x="583.5" y="1054.9082">WorkerThreadManager</text><rect fill="#FEFECE" filter="url(#f1by7kaox7j5k)" height="31.6094" style="stroke: #A80036; stroke-width: 1.5;" width="123" x="752.5" y="1033.375"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="109" x="759.5" y="1054.9082">ConcreteProcess</text><rect fill="#FFFFFF" filter="url(#f1by7kaox7j5k)" height="896.7656" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="168" y="119.6094"/><rect fill="#FFFFFF" filter="url(#f1by7kaox7j5k)" height="858.4141" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="173" y="157.9609"/><rect fill="#FFFFFF" filter="url(#f1by7kaox7j5k)" height="752.4531" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="336" y="263.9219"/><rect fill="#FFFFFF" filter="url(#f1by7kaox7j5k)" height="542.2734" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="341" y="474.1016"/><rect fill="#FFFFFF" filter="url(#f1by7kaox7j5k)" height="30.3516" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="346" y="786.9141"/><rect fill="#FFFFFF" filter="url(#f1by7kaox7j5k)" height="161.7578" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="346" y="854.6172"/><rect fill="#FFFFFF" filter="url(#f1by7kaox7j5k)" height="123.4063" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="351" y="892.9688"/><rect fill="#FFFFFF" filter="url(#f1by7kaox7j5k)" height="19.3516" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="356" y="997.0234"/><rect fill="#FFFFFF" filter="url(#f1by7kaox7j5k)" height="705.8438" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="508" y="310.5313"/><rect fill="#FFFFFF" filter="url(#f1by7kaox7j5k)" height="645.2344" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="654.5" y="371.1406"/><rect fill="#FFFFFF" filter="url(#f1by7kaox7j5k)" height="813.0625" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="811" y="203.3125"/><rect fill="#FFFFFF" filter="url(#f1by7kaox7j5k)" height="108.7031" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="816" y="647.8594"/><rect fill="#FFFFFF" filter="url(#f1by7kaox7j5k)" height="28" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="821" y="691.2109"/><polygon fill="#A80036" points="156,115.6094,166,119.6094,156,123.6094,160,119.6094" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="32" x2="162" y1="119.6094" y2="119.6094"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="117" x="39" y="115.1045">処理開始ボタン押下</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="178" x2="225" y1="145.3125" y2="145.3125"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="225" x2="225" y1="145.3125" y2="158.3125"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="184" x2="225" y1="158.3125" y2="158.3125"/><polygon fill="#A80036" points="194,154.3125,184,158.3125,194,162.3125,190,158.3125" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="144" x="190" y="140.4561">OnBnClickedBtnProcess</text><polygon fill="#A80036" points="740.5,189.3125,750.5,193.3125,740.5,197.3125,744.5,193.3125" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="183" x2="746.5" y1="193.3125" y2="193.3125"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="68" x="190" y="188.8076">&lt;&lt;create&gt;&gt;</text><rect fill="#FEFECE" filter="url(#f1by7kaox7j5k)" height="31.6094" style="stroke: #A80036; stroke-width: 1.5;" width="123" x="752.5" y="171.3125"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="109" x="759.5" y="192.8457">ConcreteProcess</text><polygon fill="#A80036" points="194,219.9219,184,223.9219,194,227.9219,190,223.9219" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="188" x2="810" y1="223.9219" y2="223.9219"/><polygon fill="#A80036" points="266.5,249.9219,276.5,253.9219,266.5,257.9219,270.5,253.9219" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="183" x2="272.5" y1="253.9219" y2="253.9219"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="68" x="190" y="249.417">&lt;&lt;create&gt;&gt;</text><rect fill="#FEFECE" filter="url(#f1by7kaox7j5k)" height="31.6094" style="stroke: #A80036; stroke-width: 1.5;" width="121" x="278.5" y="231.9219"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="107" x="285.5" y="253.4551">CProgressDialog</text><polygon fill="#A80036" points="447.5,296.5313,457.5,300.5313,447.5,304.5313,451.5,300.5313" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="346" x2="453.5" y1="300.5313" y2="300.5313"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="68" x="353" y="296.0264">&lt;&lt;create&gt;&gt;</text><rect fill="#FEFECE" filter="url(#f1by7kaox7j5k)" height="31.6094" style="stroke: #A80036; stroke-width: 1.5;" width="103" x="459.5" y="278.5313"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="89" x="466.5" y="300.0645">CProgressCtrl</text><polygon fill="#A80036" points="357,327.1406,347,331.1406,357,335.1406,353,331.1406" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="351" x2="507" y1="331.1406" y2="331.1406"/><polygon fill="#A80036" points="564.5,357.1406,574.5,361.1406,564.5,365.1406,568.5,361.1406" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="346" x2="570.5" y1="361.1406" y2="361.1406"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="68" x="353" y="356.6357">&lt;&lt;create&gt;&gt;</text><rect fill="#FEFECE" filter="url(#f1by7kaox7j5k)" height="31.6094" style="stroke: #A80036; stroke-width: 1.5;" width="162" x="576.5" y="339.1406"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="148" x="583.5" y="360.6738">WorkerThreadManager</text><polygon fill="#A80036" points="357,387.75,347,391.75,357,395.75,353,391.75" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="351" x2="653.5" y1="391.75" y2="391.75"/><polygon fill="#A80036" points="194,401.75,184,405.75,194,409.75,190,405.75" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="188" x2="335" y1="405.75" y2="405.75"/><polygon fill="#A80036" points="324,431.75,334,435.75,324,439.75,328,435.75" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="183" x2="330" y1="435.75" y2="435.75"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="59" x="190" y="431.2451">DoModal()</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="346" x2="393" y1="461.4531" y2="461.4531"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="393" x2="393" y1="461.4531" y2="474.4531"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="352" x2="393" y1="474.4531" y2="474.4531"/><polygon fill="#A80036" points="362,470.4531,352,474.4531,362,478.4531,358,474.4531" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="70" x="358" y="456.5967">OnInitDialog</text><polygon fill="#A80036" points="496,505.4531,506,509.4531,496,513.4531,500,509.4531" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="351" x2="502" y1="509.4531" y2="509.4531"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="112" x="358" y="504.9482">SetMarquee(TRUE)</text><polygon fill="#A80036" points="642.5,535.8047,652.5,539.8047,642.5,543.8047,646.5,539.8047" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="351" x2="648.5" y1="539.8047" y2="539.8047"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="63" x="358" y="535.2998">push_back</text><polygon fill="#A80036" points="362,550.1563,352,554.1563,362,558.1563,358,554.1563" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="356" x2="653.5" y1="554.1563" y2="554.1563"/><rect fill="none" height="256.4609" style="stroke: #000000; stroke-width: 2.0;" width="669.5" x="268.5" y="569.1563"/><polygon fill="#EEEEEE" points="268.5,569.1563,334.5,569.1563,334.5,577.1563,324.5,587.1563,268.5,587.1563,268.5,569.1563" style="stroke: #000000; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="21" x="283.5" y="583.6514">par</text><polygon fill="#A80036" points="799,605.5078,809,609.5078,799,613.5078,803,609.5078" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="664.5" x2="805" y1="609.5078" y2="609.5078"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="24" x="671.5" y="605.0029">Do()</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="821" x2="868" y1="635.2109" y2="635.2109"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="868" x2="868" y1="635.2109" y2="648.2109"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="827" x2="868" y1="648.2109" y2="648.2109"/><polygon fill="#A80036" points="837,644.2109,827,648.2109,837,652.2109,833,648.2109" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="48" x="833" y="630.3545">DoImpl()</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="831" x2="873" y1="683.5625" y2="683.5625"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="873" x2="873" y1="683.5625" y2="696.5625"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="832" x2="873" y1="696.5625" y2="696.5625"/><polygon fill="#A80036" points="842,692.5625,832,696.5625,842,700.5625,838,696.5625" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="88" x="838" y="678.7061">ShouldCancel()</text><polygon fill="#A80036" points="675.5,752.5625,665.5,756.5625,675.5,760.5625,671.5,756.5625" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="669.5" x2="810" y1="756.5625" y2="756.5625"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="91" x="681.5" y="752.0576">終了ステータス</text><polygon fill="#A80036" points="367,782.9141,357,786.9141,367,790.9141,363,786.9141" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="361" x2="653.5" y1="786.9141" y2="786.9141"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="182" x="373" y="782.4092">ActionWhenProcessExecutes()</text><polygon fill="#A80036" points="496,813.2656,506,817.2656,496,821.2656,500,817.2656" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="351" x2="502" y1="817.2656" y2="817.2656"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="120" x="358" y="812.7607">SetMarquee(FALSE)</text><polygon fill="#A80036" points="367,850.6172,357,854.6172,367,858.6172,363,854.6172" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="361" x2="653.5" y1="854.6172" y2="854.6172"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="148" x="373" y="850.1123">ActionWhenThreadEnds()</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="356" x2="403" y1="880.3203" y2="880.3203"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="403" x2="403" y1="880.3203" y2="893.3203"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="362" x2="403" y1="893.3203" y2="893.3203"/><polygon fill="#A80036" points="372,889.3203,362,893.3203,372,897.3203,368,893.3203" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="138" x="368" y="875.4639">OnCloseProgressDialog</text><polygon fill="#A80036" points="642.5,924.3203,652.5,928.3203,642.5,932.3203,646.5,928.3203" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="361" x2="648.5" y1="928.3203" y2="928.3203"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="65" x="368" y="923.8154">get_result()</text><polygon fill="#A80036" points="372,954.6719,362,958.6719,372,962.6719,368,958.6719" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="366" x2="653.5" y1="958.6719" y2="958.6719"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="91" x="378" y="954.167">終了ステータス</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="361" x2="408" y1="984.375" y2="984.375"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="408" x2="408" y1="984.375" y2="997.375"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="367" x2="408" y1="997.375" y2="997.375"/><polygon fill="#A80036" points="377,993.375,367,997.375,377,1001.375,373,997.375" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="59" x="373" y="979.5186">EndDialog</text><polygon fill="#A80036" points="184,1012.375,174,1016.375,184,1020.375,180,1016.375" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="178" x2="340" y1="1016.375" y2="1016.375"/><!--
@startuml

Actor ユーザ as user
participant MainDialog
participant CProgressDialog
participant CProgressCtrl
participant WorkerThreadManager
participant ConcreteProcess

user -> MainDialog : 処理開始ボタン押下
activate MainDialog

  MainDialog -> MainDialog : OnBnClickedBtnProcess
  activate MainDialog

    create ConcreteProcess
    MainDialog-> ConcreteProcess : <<create>>

    activate ConcreteProcess

      MainDialog <- - ConcreteProcess

      create CProgressDialog
      MainDialog -> CProgressDialog : <<create>>
      activate CProgressDialog

        create CProgressCtrl
        CProgressDialog -> CProgressCtrl : <<create>>
        activate CProgressCtrl
          CProgressDialog <- - CProgressCtrl

          create WorkerThreadManager
          CProgressDialog -> WorkerThreadManager : <<create>>
          activate WorkerThreadManager
            CProgressDialog <- - WorkerThreadManager

            MainDialog <- - CProgressDialog

            MainDialog-> CProgressDialog : DoModal()

            CProgressDialog -> CProgressDialog : OnInitDialog
            activate CProgressDialog

              CProgressDialog -> CProgressCtrl : SetMarquee(TRUE)
              CProgressDialog -> WorkerThreadManager : push_back
              CProgressDialog <- - WorkerThreadManager

par
              WorkerThreadManager -> ConcreteProcess : Do()

              ConcreteProcess -> ConcreteProcess : DoImpl()
              activate ConcreteProcess

                ConcreteProcess -> ConcreteProcess : ShouldCancel()
                activate ConcreteProcess
                deactivate ConcreteProcess

                WorkerThreadManager <- - ConcreteProcess : 終了ステータス

              deactivate ConcreteProcess

              CProgressDialog <- WorkerThreadManager : ActionWhenProcessExecutes()
              activate CProgressDialog
                CProgressDialog -> CProgressCtrl : SetMarquee(FALSE)
              deactivate CProgressDialog

end
              CProgressDialog <- WorkerThreadManager : ActionWhenThreadEnds()
              activate CProgressDialog

                CProgressDialog -> CProgressDialog : OnCloseProgressDialog
                activate CProgressDialog
                  CProgressDialog -> WorkerThreadManager : get_result()
                  CProgressDialog <- - WorkerThreadManager : 終了ステータス

                  CProgressDialog -> CProgressDialog : EndDialog
                  activate CProgressDialog
                    MainDialog <- - CProgressDialog
                  deactivate CProgressDialog
                deactivate CProgressDialog
              deactivate CProgressCtrl
            deactivate CProgressDialog
          deactivate CProgressDialog
        deactivate CProgressDialog
      deactivate WorkerThreadManager
    deactivate ConcreteProcess
  deactivate MainDialog
deactivate MainDialog

@enduml

PlantUML version 2017.11(Thu Apr 20 01:18:59 JST 2017)
(GPL source distribution)
Java Runtime: Java(TM) SE Runtime Environment
JVM: Java HotSpot(TM) 64-Bit Server VM
Java Version: 1.8.0_121-b13
Operating System: Windows 10
OS Version: 10.0
Default Encoding: MS932
Language: ja
Country: JP
--></g></svg>