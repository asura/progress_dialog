<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="1031px" preserveAspectRatio="none" style="width:1029px;height:1031px;" version="1.1" viewBox="0 0 1029 1031" width="1029px" zoomAndPan="magnify"><defs><filter height="300%" id="f1f43m7the6crl" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><rect fill="#FFFFFF" filter="url(#f1f43m7the6crl)" height="808.0625" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="168" y="119.6094"/><rect fill="#FFFFFF" filter="url(#f1f43m7the6crl)" height="769.7109" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="173" y="157.9609"/><rect fill="#FFFFFF" filter="url(#f1f43m7the6crl)" height="672.75" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="336" y="263.9219"/><rect fill="#FFFFFF" filter="url(#f1f43m7the6crl)" height="514.1797" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="341" y="413.4922"/><rect fill="#FFFFFF" filter="url(#f1f43m7the6crl)" height="199.1094" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="346" y="728.5625"/><rect fill="#FFFFFF" filter="url(#f1f43m7the6crl)" height="160.7578" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="351" y="766.9141"/><rect fill="#FFFFFF" filter="url(#f1f43m7the6crl)" height="19.3516" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="356" y="908.3203"/><rect fill="#FFFFFF" filter="url(#f1f43m7the6crl)" height="617.1406" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="669" y="310.5313"/><rect fill="#FFFFFF" filter="url(#f1f43m7the6crl)" height="724.3594" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="893.5" y="203.3125"/><rect fill="#FFFFFF" filter="url(#f1f43m7the6crl)" height="108.7031" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="898.5" y="589.5078"/><rect fill="#FFFFFF" filter="url(#f1f43m7the6crl)" height="28" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="903.5" y="632.8594"/><rect fill="#FEFECE" filter="url(#f1f43m7the6crl)" height="31.6094" style="stroke: #A80036; stroke-width: 1.5;" width="123" x="835" y="171.3125"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="109" x="842" y="192.8457">ConcreteProcess</text><rect fill="#FEFECE" filter="url(#f1f43m7the6crl)" height="31.6094" style="stroke: #A80036; stroke-width: 1.5;" width="121" x="278.5" y="231.9219"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="107" x="285.5" y="253.4551">CProgressDialog</text><rect fill="#FEFECE" filter="url(#f1f43m7the6crl)" height="31.6094" style="stroke: #A80036; stroke-width: 1.5;" width="103" x="620.5" y="278.5313"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="89" x="627.5" y="300.0645">CProgressCtrl</text><rect fill="#FEFECE" filter="url(#f1f43m7the6crl)" height="31.6094" style="stroke: #A80036; stroke-width: 1.5;" width="78" x="737.5" y="457.1953"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="64" x="744.5" y="478.7285">std::future</text><rect fill="#FFFFFF" filter="url(#f1f43m7the6crl)" height="269.4609" style="stroke: #000000; stroke-width: 2.0;" width="752" x="268.5" y="510.8047"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="32" x2="32" y1="87.6094" y2="945.6719"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="173" x2="173" y1="87.6094" y2="945.6719"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="340.5" x2="340.5" y1="265.2266" y2="945.6719"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="673.5" x2="673.5" y1="311.8359" y2="945.6719"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="778.5" x2="778.5" y1="490.5" y2="945.6719"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="898" x2="898" y1="204.6172" y2="945.6719"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="42" x="8" y="84.5332">ユーザ</text><ellipse cx="32" cy="13" fill="#FEFECE" filter="url(#f1f43m7the6crl)" rx="8" ry="8" style="stroke: #A80036; stroke-width: 2.0;"/><path d="M32,21 L32,48 M19,29 L45,29 M32,48 L19,63 M32,48 L45,63 " fill="#FEFECE" filter="url(#f1f43m7the6crl)" style="stroke: #A80036; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="42" x="8" y="959.2051">ユーザ</text><ellipse cx="32" cy="972.2813" fill="#FEFECE" filter="url(#f1f43m7the6crl)" rx="8" ry="8" style="stroke: #A80036; stroke-width: 2.0;"/><path d="M32,980.2813 L32,1007.2813 M19,988.2813 L45,988.2813 M32,1007.2813 L19,1022.2813 M32,1007.2813 L45,1022.2813 " fill="#FEFECE" filter="url(#f1f43m7the6crl)" style="stroke: #A80036; stroke-width: 2.0;"/><rect fill="#FEFECE" filter="url(#f1f43m7the6crl)" height="31.6094" style="stroke: #A80036; stroke-width: 1.5;" width="84" x="129" y="51"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="70" x="136" y="72.5332">MainDialog</text><rect fill="#FEFECE" filter="url(#f1f43m7the6crl)" height="31.6094" style="stroke: #A80036; stroke-width: 1.5;" width="84" x="129" y="944.6719"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="70" x="136" y="966.2051">MainDialog</text><rect fill="#FEFECE" filter="url(#f1f43m7the6crl)" height="31.6094" style="stroke: #A80036; stroke-width: 1.5;" width="121" x="278.5" y="944.6719"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="107" x="285.5" y="966.2051">CProgressDialog</text><rect fill="#FEFECE" filter="url(#f1f43m7the6crl)" height="31.6094" style="stroke: #A80036; stroke-width: 1.5;" width="103" x="620.5" y="944.6719"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="89" x="627.5" y="966.2051">CProgressCtrl</text><rect fill="#FEFECE" filter="url(#f1f43m7the6crl)" height="31.6094" style="stroke: #A80036; stroke-width: 1.5;" width="78" x="737.5" y="944.6719"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="64" x="744.5" y="966.2051">std::future</text><rect fill="#FEFECE" filter="url(#f1f43m7the6crl)" height="31.6094" style="stroke: #A80036; stroke-width: 1.5;" width="123" x="835" y="944.6719"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="109" x="842" y="966.2051">ConcreteProcess</text><rect fill="#FFFFFF" filter="url(#f1f43m7the6crl)" height="808.0625" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="168" y="119.6094"/><rect fill="#FFFFFF" filter="url(#f1f43m7the6crl)" height="769.7109" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="173" y="157.9609"/><rect fill="#FFFFFF" filter="url(#f1f43m7the6crl)" height="672.75" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="336" y="263.9219"/><rect fill="#FFFFFF" filter="url(#f1f43m7the6crl)" height="514.1797" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="341" y="413.4922"/><rect fill="#FFFFFF" filter="url(#f1f43m7the6crl)" height="199.1094" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="346" y="728.5625"/><rect fill="#FFFFFF" filter="url(#f1f43m7the6crl)" height="160.7578" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="351" y="766.9141"/><rect fill="#FFFFFF" filter="url(#f1f43m7the6crl)" height="19.3516" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="356" y="908.3203"/><rect fill="#FFFFFF" filter="url(#f1f43m7the6crl)" height="617.1406" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="669" y="310.5313"/><rect fill="#FFFFFF" filter="url(#f1f43m7the6crl)" height="724.3594" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="893.5" y="203.3125"/><rect fill="#FFFFFF" filter="url(#f1f43m7the6crl)" height="108.7031" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="898.5" y="589.5078"/><rect fill="#FFFFFF" filter="url(#f1f43m7the6crl)" height="28" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="903.5" y="632.8594"/><polygon fill="#A80036" points="156,115.6094,166,119.6094,156,123.6094,160,119.6094" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="32" x2="162" y1="119.6094" y2="119.6094"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="117" x="39" y="115.1045">処理開始ボタン押下</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="178" x2="225" y1="145.3125" y2="145.3125"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="225" x2="225" y1="145.3125" y2="158.3125"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="184" x2="225" y1="158.3125" y2="158.3125"/><polygon fill="#A80036" points="194,154.3125,184,158.3125,194,162.3125,190,158.3125" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="144" x="190" y="140.4561">OnBnClickedBtnProcess</text><polygon fill="#A80036" points="823,189.3125,833,193.3125,823,197.3125,827,193.3125" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="183" x2="829" y1="193.3125" y2="193.3125"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="68" x="190" y="188.8076">&lt;&lt;create&gt;&gt;</text><rect fill="#FEFECE" filter="url(#f1f43m7the6crl)" height="31.6094" style="stroke: #A80036; stroke-width: 1.5;" width="123" x="835" y="171.3125"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="109" x="842" y="192.8457">ConcreteProcess</text><polygon fill="#A80036" points="194,219.9219,184,223.9219,194,227.9219,190,223.9219" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="188" x2="892.5" y1="223.9219" y2="223.9219"/><polygon fill="#A80036" points="266.5,249.9219,276.5,253.9219,266.5,257.9219,270.5,253.9219" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="183" x2="272.5" y1="253.9219" y2="253.9219"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="68" x="190" y="249.417">&lt;&lt;create&gt;&gt;</text><rect fill="#FEFECE" filter="url(#f1f43m7the6crl)" height="31.6094" style="stroke: #A80036; stroke-width: 1.5;" width="121" x="278.5" y="231.9219"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="107" x="285.5" y="253.4551">CProgressDialog</text><polygon fill="#A80036" points="608.5,296.5313,618.5,300.5313,608.5,304.5313,612.5,300.5313" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="346" x2="614.5" y1="300.5313" y2="300.5313"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="68" x="353" y="296.0264">&lt;&lt;create&gt;&gt;</text><rect fill="#FEFECE" filter="url(#f1f43m7the6crl)" height="31.6094" style="stroke: #A80036; stroke-width: 1.5;" width="103" x="620.5" y="278.5313"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="89" x="627.5" y="300.0645">CProgressCtrl</text><polygon fill="#A80036" points="357,327.1406,347,331.1406,357,335.1406,353,331.1406" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="351" x2="668" y1="331.1406" y2="331.1406"/><polygon fill="#A80036" points="194,341.1406,184,345.1406,194,349.1406,190,345.1406" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="188" x2="335" y1="345.1406" y2="345.1406"/><polygon fill="#A80036" points="324,371.1406,334,375.1406,324,379.1406,328,375.1406" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="183" x2="330" y1="375.1406" y2="375.1406"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="59" x="190" y="370.6357">DoModal()</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="346" x2="393" y1="400.8438" y2="400.8438"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="393" x2="393" y1="400.8438" y2="413.8438"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="352" x2="393" y1="413.8438" y2="413.8438"/><polygon fill="#A80036" points="362,409.8438,352,413.8438,362,417.8438,358,413.8438" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="70" x="358" y="395.9873">OnInitDialog</text><polygon fill="#A80036" points="657,444.8438,667,448.8438,657,452.8438,661,448.8438" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="351" x2="663" y1="448.8438" y2="448.8438"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="112" x="358" y="444.3389">SetMarquee(TRUE)</text><polygon fill="#A80036" points="725.5,475.1953,735.5,479.1953,725.5,483.1953,729.5,479.1953" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="351" x2="731.5" y1="479.1953" y2="479.1953"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="61" x="358" y="474.6904">std::async</text><rect fill="#FEFECE" filter="url(#f1f43m7the6crl)" height="31.6094" style="stroke: #A80036; stroke-width: 1.5;" width="78" x="737.5" y="457.1953"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="64" x="744.5" y="478.7285">std::future</text><rect fill="none" height="269.4609" style="stroke: #000000; stroke-width: 2.0;" width="752" x="268.5" y="510.8047"/><polygon fill="#EEEEEE" points="268.5,510.8047,334.5,510.8047,334.5,518.8047,324.5,528.8047,268.5,528.8047,268.5,510.8047" style="stroke: #000000; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="21" x="283.5" y="525.2998">par</text><polygon fill="#A80036" points="881.5,547.1563,891.5,551.1563,881.5,555.1563,885.5,551.1563" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="778.5" x2="887.5" y1="551.1563" y2="551.1563"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="24" x="785.5" y="546.6514">Do()</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="903.5" x2="950.5" y1="576.8594" y2="576.8594"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="950.5" x2="950.5" y1="576.8594" y2="589.8594"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="909.5" x2="950.5" y1="589.8594" y2="589.8594"/><polygon fill="#A80036" points="919.5,585.8594,909.5,589.8594,919.5,593.8594,915.5,589.8594" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="48" x="915.5" y="572.0029">DoImpl()</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="913.5" x2="955.5" y1="625.2109" y2="625.2109"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="955.5" x2="955.5" y1="625.2109" y2="638.2109"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="914.5" x2="955.5" y1="638.2109" y2="638.2109"/><polygon fill="#A80036" points="924.5,634.2109,914.5,638.2109,924.5,642.2109,920.5,638.2109" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="88" x="920.5" y="620.3545">ShouldCancel()</text><polygon fill="#A80036" points="789.5,694.2109,779.5,698.2109,789.5,702.2109,785.5,698.2109" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="783.5" x2="892.5" y1="698.2109" y2="698.2109"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="91" x="795.5" y="693.7061">終了ステータス</text><polygon fill="#A80036" points="367,724.5625,357,728.5625,367,732.5625,363,728.5625" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="361" x2="777.5" y1="728.5625" y2="728.5625"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="148" x="373" y="724.0576">ActionWhenThreadEnds()</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="356" x2="403" y1="754.2656" y2="754.2656"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="403" x2="403" y1="754.2656" y2="767.2656"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="362" x2="403" y1="767.2656" y2="767.2656"/><polygon fill="#A80036" points="372,763.2656,362,767.2656,372,771.2656,368,767.2656" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="299" x="368" y="749.4092">PostMessage(WM_CLOSE_PROGRESS_DIALOG)</text><polygon fill="#A80036" points="657,805.2656,667,809.2656,657,813.2656,661,809.2656" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="361" x2="663" y1="809.2656" y2="809.2656"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="120" x="368" y="804.7607">SetMarquee(FALSE)</text><polygon fill="#A80036" points="766.5,835.6172,776.5,839.6172,766.5,843.6172,770.5,839.6172" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="361" x2="772.5" y1="839.6172" y2="839.6172"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="26" x="368" y="835.1123">get()</text><polygon fill="#A80036" points="372,865.9688,362,869.9688,372,873.9688,368,869.9688" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="366" x2="777.5" y1="869.9688" y2="869.9688"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="91" x="378" y="865.4639">終了ステータス</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="361" x2="408" y1="895.6719" y2="895.6719"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="408" x2="408" y1="895.6719" y2="908.6719"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="367" x2="408" y1="908.6719" y2="908.6719"/><polygon fill="#A80036" points="377,904.6719,367,908.6719,377,912.6719,373,908.6719" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="59" x="373" y="890.8154">EndDialog</text><polygon fill="#A80036" points="184,923.6719,174,927.6719,184,931.6719,180,927.6719" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="178" x2="335" y1="927.6719" y2="927.6719"/><!--
@startuml

Actor ユーザ as user
participant MainDialog
participant CProgressDialog
participant CProgressCtrl
participant "std::future" AS future
participant ConcreteProcess

user -> MainDialog : 処理開始ボタン押下
activate MainDialog

  MainDialog -> MainDialog : OnBnClickedBtnProcess
  activate MainDialog

    create ConcreteProcess
    MainDialog-> ConcreteProcess : <<create>>

    activate ConcreteProcess

      MainDialog <- - ConcreteProcess

      create CProgressDialog
      MainDialog -> CProgressDialog : <<create>>
      activate CProgressDialog

        create CProgressCtrl
        CProgressDialog -> CProgressCtrl : <<create>>
        activate CProgressCtrl
          CProgressDialog <- - CProgressCtrl

            MainDialog <- - CProgressDialog

            MainDialog-> CProgressDialog : DoModal()

            CProgressDialog -> CProgressDialog : OnInitDialog
            activate CProgressDialog

              CProgressDialog -> CProgressCtrl : SetMarquee(TRUE)

              create future
              CProgressDialog -> future : std::async

par
              future -> ConcreteProcess : Do()

              ConcreteProcess -> ConcreteProcess : DoImpl()
              activate ConcreteProcess

                ConcreteProcess -> ConcreteProcess : ShouldCancel()
                activate ConcreteProcess
                deactivate ConcreteProcess

                future <- - ConcreteProcess : 終了ステータス

              deactivate ConcreteProcess

              CProgressDialog <- future : ActionWhenThreadEnds()
              activate CProgressDialog
                CProgressDialog -> CProgressDialog : PostMessage(WM_CLOSE_PROGRESS_DIALOG)
                activate CProgressDialog
  
end
                  CProgressDialog -> CProgressCtrl : SetMarquee(FALSE)
                  CProgressDialog -> future : get()
                  CProgressDialog <- - future : 終了ステータス

                  CProgressDialog -> CProgressDialog : EndDialog
                  activate CProgressDialog
                    MainDialog <- - CProgressDialog
                  deactivate CProgressDialog
                deactivate CProgressCtrl
            deactivate CProgressDialog
          deactivate CProgressDialog
        deactivate CProgressDialog
    deactivate ConcreteProcess
  deactivate MainDialog
deactivate MainDialog

@enduml

PlantUML version 2017.11(Thu Apr 20 01:18:59 JST 2017)
(GPL source distribution)
Java Runtime: Java(TM) SE Runtime Environment
JVM: Java HotSpot(TM) 64-Bit Server VM
Java Version: 1.8.0_121-b13
Operating System: Windows 10
OS Version: 10.0
Default Encoding: MS932
Language: ja
Country: JP
--></g></svg>